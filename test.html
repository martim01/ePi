<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 5.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<HTML>
	<head>
		<meta name="description" content="" >
		<meta name="author" content="Matthew Martin">
		<meta name="keywords" content="" >
		<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
		<meta http-equiv="Expires" content="Mon, 26 Jul 1980 05:00:00 GMT">
		<meta http-equiv="Expires" content="0">
		<meta http-equiv="pragma" content="no-cache">
		<meta http-equiv="Cache-Control" content="no-cache, must-revalidate, post-check=0, pre-check=0">
		<meta http-equiv="Cache-Control" content="max-age=0">
		<title>ePI</title>
		<script type="text/javascript" language="javascript">
			function postSchedule()
			{
				console.log("postSchedule");
				
				var ajax = new XMLHttpRequest();
				ajax.onreadystatechange = function()
				{
					console.log(this.readyState+"="+this.responseText);
					
					if(this.readyState == 4)
					{
						var jsonObj = JSON.parse(this.responseText);
						console.log(jsonObj);
					}
				}
				var schedule = { "label" : "test", "description" : "test schedule", "schedule" : [ { "offset" : 0, "file" : "4f45fced-e5c3-3bd6-b133-15fd2ce62b5c", "loop" : false } ] };
				console.log(schedule);
				ajax.open("POST", "http://127.0.0.1:8080/x-epi/schedules",true);
				ajax.setRequestHeader("Content-type", "application/json");
				ajax.send(JSON.stringify(schedule));
			}
			function upload_file()
			{
				var fd = new FormData(document.getElementById('upload_form'));
				
				var ajax = new XMLHttpRequest();
				ajax.onreadystatechange = function()
				{
					console.log(this.readyState+"="+this.responseText);
					
					if(this.readyState == 4)
					{
						var jsonObj = JSON.parse(this.responseText);
						console.log(jsonObj);
						
					}
				}
				ajax.open('POST','http://127.0.0.1:8080/x-epi/files');
				ajax.send(fd);
				
			}
		</script>
	</head>
	<body>
	<button onclick="postSchedule()">Schedule</button>
	<form method="post" enctype="multipart/form-data" style="text-align: left" onsubmit="return false;" id="upload_form">
		<div class="grid grid_server" id="upload_grid">
		<div class="grid grid_title" style="margin-top: 4px">Label:</div><div><input type="text" name="label_1"></div>
		<div class="grid grid_title" style="margin-top: 4px">Description:</div><div><input type="text" name="description_1"></div>
		<div class="grid_title" style="margin-top: 4px">Action:</div><div><input type="file" name="file_1" class="a_button" accept=".wav;*.mp3"> <button onclick="upload_file()">Upload</button></div>
		</div>
	</form>
	</body>
</html>
